<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Draw Pie Graphs based on one or more columns — plotPie • extraChIPs</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Draw Pie Graphs based on one or more columns — plotPie"><meta property="og:description" content="Draw Pie Graphs based one or more data.frame columns"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">extraChIPs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/range_based_functions.html">Range-based Operations</a>
    </li>
    <li>
      <a href="../articles/differential_signal_sliding.html">Differential Signal Using Sliding Windows</a>
    </li>
    <li>
      <a href="../articles/differential_signal_fixed.html">Differential Signal Using Fixed-Width Windows</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/smped/extraChIPs" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Draw Pie Graphs based on one or more columns</h1>
    <small class="dont-index">Source: <a href="https://github.com/smped/extraChIPs/blob/HEAD/R/AllGenerics.R" class="external-link"><code>R/AllGenerics.R</code></a>, <a href="https://github.com/smped/extraChIPs/blob/HEAD/R/plotPie.R" class="external-link"><code>R/plotPie.R</code></a></small>
    <div class="hidden name"><code>plotPie-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Draw Pie Graphs based one or more data.frame columns</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plotPie</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for GRanges</span></span>
<span><span class="fu">plotPie</span><span class="op">(</span><span class="va">object</span>, scale_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"width"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for DataFrame</span></span>
<span><span class="fu">plotPie</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for data.frame</span></span>
<span><span class="fu">plotPie</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">fill</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  <span class="va">scale_by</span>,</span>
<span>  scale_factor <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  total_geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"label"</span>, <span class="st">"text"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  total_glue <span class="op">=</span> <span class="st">"{comma(N)}"</span>,</span>
<span>  total_colour <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  total_fill <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  total_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  total_size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  min_p <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  max_p <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cat_geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"label"</span>, <span class="st">"text"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  cat_glue <span class="op">=</span> <span class="st">"{.data[[fill]]}\n{comma(n, 1)}\n({percent(p, 0.1)})"</span>,</span>
<span>  cat_colour <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  cat_fill <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  cat_size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  cat_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cat_adj <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  hole_width <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>An object (<code>data.frame</code>)</p></dd>


<dt>...</dt>
<dd><p>Not used</p></dd>


<dt>scale_by</dt>
<dd><p>Scale the counts by this column. In this case of a GRanges
object this defaults to the count (scale_by = "n") but can also be specified
as being width of each range (scale_by = "width"). If choosing width, width
will be displayed in Kb</p></dd>


<dt>fill</dt>
<dd><p>The category/column used to fill the slices of the pie charts</p></dd>


<dt>x</dt>
<dd><p>The second (optional) category/column to place along the x-axis</p></dd>


<dt>y</dt>
<dd><p>The final (optional) category/column to plce along the y-axis</p></dd>


<dt>scale_factor</dt>
<dd><p>When scaling by another column, such as width, totals
will be divided by this value, with 1000 being the default to provide output
in kb.</p></dd>


<dt>width</dt>
<dd><p>Scale the width of all pies</p></dd>


<dt>total_geom</dt>
<dd><p>The geom_* to use for the totals at the centre of each pie.
Setting this to 'none' will disable totals</p></dd>


<dt>total_glue</dt>
<dd><p><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a> syntax to use for the totals in the
centre of each pie. The column 'N' will produce the totals and any other
values or formatting may be added here.</p></dd>


<dt>total_colour, total_fill, total_alpha, total_size</dt>
<dd><p>Colour, fill, alpha and
size for the main totals in the centre of each pie chart</p></dd>


<dt>min_p</dt>
<dd><p>The minimum proportion of the total required for adding labels.
Effectively removes labels from pie charts with few members. Alternatively
when only one column is specified, categories below this will not be shown
around the edge of the plot</p></dd>


<dt>max_p</dt>
<dd><p>only display labels for segments representing less than this
proportion of the total.</p></dd>


<dt>cat_geom</dt>
<dd><p>The geom_* to use for category labels corresponding to each
slice of the pie. Setting this to 'none' will disable category labels</p></dd>


<dt>cat_glue</dt>
<dd><p><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a> syntax to use for the category labels
corresponding to each slice of the pie charts. The columns 'n' and 'p' can
be used to print totals and proportions for each slice.</p></dd>


<dt>cat_colour, cat_fill, cat_size, cat_alpha</dt>
<dd><p>Colour, fill, size and alpha
for category labels</p></dd>


<dt>cat_adj</dt>
<dd><p>Adjust category labels</p></dd>


<dt>hole_width</dt>
<dd><p>Add a hole in the middle to turn the plot into a donut.
Values between zero and 1 work best. Only implemented for pie charts using
one value (i.e. fill)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A ggplot2 object able to be customised with colour scales and themes.</p>


<p>Also note that the $data element of the returned object will contain the
data.frame used for plotting. The additional column <code>label_radians</code></p>


<p>represents the mid-point of each pie slice and can be used for manually
adding labels to each pie.
Only applies when plotting across the <code>x</code> or <code>y</code> axes</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Using a <code>data.frame</code> as input, this function will draw pie graphs based
on one ore more columns, by simply counting the values in combination
across these columns.
One column must be selected for the fill as a bare minimum, with up to three
being possible.
Additional columns can be set for the x-axis to draw a series of pie-graphs
in a row, with a further column able to added to layout a series of pie
graphs in a grid</p>
<p>If only one column/category is chosen, category labels will be added around
the edge of the plot</p>
<p>If <code>show_total = TRUE</code> the overall counts for each pie graph will be added
in the centre using <a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a>.
Parameters for these labels are customisable</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  feature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Promoter"</span>, <span class="st">"Enhancer"</span>, <span class="st">"Intergenic"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  TF1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Up"</span>, <span class="st">"Down"</span>, <span class="st">"Unchanged"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  TF2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Up"</span>, <span class="st">"Down"</span>, <span class="st">"Unchanged"</span><span class="op">)</span>, <span class="fl">200</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  w <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span><span class="va">df</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, total_glue <span class="op">=</span> <span class="st">"N = {comma(N)}"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, scale_by <span class="op">=</span> <span class="st">"w"</span>, total_geom <span class="op">=</span> <span class="st">"none"</span>,</span></span>
<span class="r-in"><span>  cat_glue <span class="op">=</span> <span class="st">"{percent(p)}"</span>, cat_size <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span><span class="va">df</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, x <span class="op">=</span> <span class="st">"TF1"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, x <span class="op">=</span> <span class="st">"TF1"</span>, y <span class="op">=</span> <span class="st">"TF2"</span>, min_p <span class="op">=</span> <span class="fl">0.02</span>,</span></span>
<span class="r-in"><span>  total_geom <span class="op">=</span> <span class="st">"none"</span>, cat_glue <span class="op">=</span> <span class="st">"{n} / {N}"</span></span></span>
<span class="r-in"><span> <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## And using a GRanges object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"ex_prom"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">&lt;-</span> <span class="va">ex_prom</span></span></span>
<span class="r-in"><span><span class="fu">mcols</span><span class="op">(</span><span class="va">gr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">gr</span><span class="op">)</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="co">## Show values by counts</span></span></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span><span class="va">gr</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, total_size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">## Show values scaled by width of each range as a donut plot</span></span></span>
<span class="r-in"><span><span class="fu">plotPie</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gr</span>, fill <span class="op">=</span> <span class="st">"feature"</span>, scale_by <span class="op">=</span> <span class="st">"width"</span>, total_glue <span class="op">=</span> <span class="st">"{round(N, 1)}kb"</span>,</span></span>
<span class="r-in"><span>  cat_glue <span class="op">=</span> <span class="st">"{percent(p, 0.1)}"</span>, cat_size <span class="op">=</span> <span class="fl">4</span>, total_size <span class="op">=</span> <span class="fl">5</span>, hole_width <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotPie-methods-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Stephen Pederson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

